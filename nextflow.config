import java.time.*
Date now = new Date()

process {
    withName: trimmomatic {
        container = 'docker://staphb/trimmomatic'
    }
    withName: kraken {
        container = 'docker://staphb/kraken2'
    }
    withName: ray {
        container = 'library://millironx/default/ray'
    }
    withName: blastnray {
        container = 'docker://ncbi/blast'
    }
    withName: blastniva {
        container = 'docker://ncbi/blast'
    }
    withName: blastxray {
        container = 'docker://ncbi/blast'
    }
    withName: blastxiva {
        container = 'docker://ncbi/blast'
    }
    withName: fastq2fasta {
        container = 'library://millironx/default/julia'
    }
    withName: iva {
        container = 'docker://sangerpathogens/iva'
    }
}
singularity {
    enabled = true
    runOptions = "--bind /databases"
}
executor {
    $local {
        queueSize = 4
        memory = '32 GB'
    }
}
params {
    tracedir = "pipeline_info"
    timestamp = now.format("yyyyMMdd-HH-mm-ss")
}
timeline {
    enabled = true
    file = "${params.tracedir}/${params.timestamp}_timeline.html"
}
report {
    enabled = true
    file = "${params.tracedir}/${params.timestamp}_report.html"
}
trace {
    enabled = true
    file = "${params.tracedir}/${params.timestamp}_trace.txt"
}
dag {
    enabled = true
    file = "${params.tracedir}/${params.timestamp}_dag.svg"
}
